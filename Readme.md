# Telegram-бот по поиску отелей

Бот подбирает отели по критериям поиска. 
Ссылка на бота: https://t.me/Hotels_Assist_bot

## Функционал бота

Данный Telegram-бот позволяет:

- подобрать отели по самой низкой или высокой цене;
- подобрать отели по лучшему соотношению цена/расстояние от центра города;
- посмотреть историю поиска.

Получаемые данные по каждому отелю:

- Название отеля;
- Адрес отеля;
- Удаленность от центра в км;
- Период проживания, который ввел пользователь;
- Стоимость проживания за определенный период;
- Стоимость проживания за ночь.

## Requirements

- Python 3.8+
- peewee==3.14.8
- PyMySQL==1.0.2
- pyTelegramBotAPI==4.2.1
- python-dateutil==2.8.2
- python-decouple==3.5
- python-telegram-bot-calendar==1.0.5
- requests==2.26.0

## Запуск бота
- Установить MySQL, в консоли MySQL ввести пароль - который указан в файле settings.py.
- Для установки вышеприведенных библиотек выполните следующую команду: pip install -r requirements.txt.
- Запустить файл main.py.



## Бот выполняет следующие команды:

- /start - запуск бота, выполняется автоматически при подключении к боту.
- /help - список команд и их описание
- /lowprice — вывод самых дешёвых отелей в городе;
- /highprice — вывод самых дорогих отелей в городе;
- /bestdeal — вывод отелей, наиболее подходящих по цене и ближайшие к центу;
- /history — вывод истории поиска отелей.

### Описание команд Telegram-бота

#### Поиск самых дешевых отелей (/lowprice)

1. При вводе команды /lowprice Бот запрашивает город, в котором Вы хотите найти отели.
2. Далее пользователь вводит название населенного пункта. Бот выполнит запрос к hotels api и выведет список локаций,
   названия которых похожи на введенный город. Если бот не найдет ни одну локацию, то необходимо ввести название города
   еще раз, возможно пользователь допустил ошибку при вводе.
3. Далее запрашивается кол-во отелей, которое необходимо вывести.
4. Затем пользователь выбирает дату въезда и выезда.
5. После определения дат въезда и выезда бот спрашивает у пользователя, нужно ли вывести фотографии отеля.
6. В случае положительного ответа бот отправляет пользователю альбом (в случае, если фото > 1) фотографии с информацией
   (см. выше) по каждому найденному отелю.

#### Поиск самых дорогих отелей (/highprice)

1. При вводе команды /highprice Бот запрашивает город, в котором Вы хотите найти отели.
2. Далее пользователь вводит название населенного пункта. Бот выполнит запрос к hotels api и выведет список локаций,
   названия которых похожи на введенный город. Если бот не найдет ни одну локацию, то необходимо ввести название города
   еще раз, возможно пользователь допустил ошибку при вводе.
3. Далее запрашивается кол-во отелей, которое необходимо вывести.
4. Затем пользователь выбирает дату въезда и выезда.
5. После определения дат въезда и выезда бот спрашивает у пользователя, нужно ли вывести фотографии отеля.
6. В случае положительного ответа бот отправляет пользователю альбом (в случае, если фото > 1) фотографии с информацией
   (см. выше) по каждому найденному отелю.

#### Поиск предложений с указанием диапазона цен (/bestdeal)

1. При вводе команды /bestdeal Бот запрашивает город, в котором Вы хотите найти отели.
2. Далее пользователь вводит название населенного пункта. Бот выполнит запрос к hotels api и выведет список локаций,
   названия которых похожи на введенный город. Если бот не найдет ни одну локацию, то необходимо ввести название города
   еще раз, возможно пользователь допустил ошибку при вводе.
3. Далее запрашивается кол-во отелей, которое необходимо вывести.
4. После пользователь задает диапазон цен.
5. Затем пользователь выбирает дату въезда и выезда.
6. После определения дат въезда и выезда бот спрашивает у пользователя, нужно ли вывести фотографии отеля.
7. В случае положительного ответа бот отправляет пользователю альбом (в случае, если фото > 1) фотографии с информацией
   (см. выше) по каждому найденному отелю.
   
#### История запросов (/history)
При вводе команды /history пользователь получает историю ВСЕХ своих запросов.
